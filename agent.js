var agentData = {
    "Astra": {
        "playstyle": "supportive",
        "role": "controller",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["smoke", "disruption"],
        "teamSupport": "yes",
        "skillFloor": "high",
        "mobility": "low",
        "playmaking": "no",
        "description": "Astra is a tactical controller who harnesses the power of the cosmos to manipulate the battlefield. Armed with a sniper rifle as her primary weapon, she excels at long-range engagements. Astra also carries a reliable sidearm for close-quarters combat. Her abilities revolve around cosmic manipulation, allowing her to place stars on the map and activate them to create powerful effects. She can create gravity wells to pull enemies, block sightlines with smokes, and even globally use her ultimate ability to project herself onto any part of the map. Astra's playstyle is tactical, as she requires careful positioning and strategic decision-making to maximize her abilities. She provides valuable team support by controlling the flow of the game and setting up plays for her teammates. Players who enjoy a high-skill ceiling and making impactful plays will find Astra to be a versatile and powerful choice."
    },
    "Breach": {
        "playstyle": "aggressive",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["disruption", "flash"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "yes",
        "description": "Breach is an impactful initiator who excels at destabilizing foes and creating opportunities for his team. His abilities are built around disruption and stunning effects, enabling him to breach enemy defenses and set the stage for successful engagements.Breach's toolkit includes Fault Line, a seismic blast that travels through terrain, concussing and knocking up any enemies hit. Aftershock sends a series of powerful tremors through the ground, damaging and displacing foes. His signature ability, Flashpoint, is a blinding charge that, upon activation, blinds any looking at it within its line of sight.His ultimate, Rolling Thunder, is a force to be reckoned with. Upon casting, it emits a powerful quake that dazes and knocks up all caught in its radius, leaving enemies vulnerable to follow-up attacks.Breach's playstyle revolves around calculated disruption and strategic initiation. His ability to breach obstacles and leave enemies incapacitated paves the way for his team's success. Players who value precise timing, team coordination, and setting up impactful plays will find Breach to be an invaluable asset in their pursuit of victory."
    },
    "Brimstone": {
        "playstyle": "defensive",
        "role": "controller",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "frenzy", "shorty", "ghost"],
        "ability": ["smoke", "molly"],
        "teamSupport": "yes",
        "skillFloor": "low",
        "mobility": "medium",
        "playmaking": "no",
        "description": "Brimstone is a controller who can block sightlines with smokes and provide supportive airstrikes to control the battlefield."   
    },
    "Chamber": {
        "playstyle": "aggressive",
        "role": "sentinel",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "ghost"],
        "ability": ["teleport", "area-denial"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Chamber is a sentinel who has the ability to tp himself to a teleport anchor. He also has a sheriff as an Ability and a one shot sniper as an ult. "
    },
    "Cypher": {
        "playstyle": "defensive",
        "role": "sentinel",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["area-denial", "smoke"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "low",
        "playmaking": "yes",
        "description": "Cypher is a sentinel who specializes in surveillance and information gathering, providing valuable intel to his team. His abilities revolve around surveillance, allowing him to set up cameras to watch enemy movements, place tripwires to detect enemies, and even catch enemies in a trap with his ultimate ability. Cypher's playstyle is defensive, as he excels at holding positions and providing valuable information to his team. Players who enjoy a strategic and information-oriented role will find Cypher to be an invaluable asset."
    },
    "Deadlock": {
        "playstyle": "defensive",
        "role": "sentinel",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["area-denial", "disruption"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "low",
        "playmaking": "no",
        "description": "test"
    },
    "Fade": {
        "playstyle": "supportive",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["disruption", "recon"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "no",
        "description": "Fade is an Initiator which can reve",
    },
    "Harbor": {
        "playstyle": "supportive",
        "role": "controller",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["smoke", "area-denial"],
        "teamSupport": "yes",
        "skillFloor": "high",
        "mobility": "medium",
        "playmaking": "no",
        "description": "test",
    },
    "Gecko": {
        "playstyle": "supportive",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["flash", "molly", "recon"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "yes",
        "description": "test",
    },
    "Jett": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": ["rifle", "sniper"],
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["mobility", "smoke"],
        "teamSupport": "no",
        "skillFloor": "low",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Jett is an agile duelist known for her swift and aggressive playstyle. Her unique abilities harness her speed and precision to outmaneuver enemies and secure eliminations. She thrives in high-tempo engagements and excels at creating chaos in the enemy ranks.Jett's toolkit includes Cloudburst, which allows her to throw projectile clouds, obscuring vision and providing opportunities for evasive maneuvers. Updraft enables quick vertical repositioning, catching foes off-guard. Her ultimate ability, Blade Storm, equips her with deadly throwing knives, granting her the ability to eliminate opponents with precision.Jett's playstyle revolves around aggressive flanks, rapid peeks, and unpredictable movement. Her exceptional speed and mobility make her a formidable adversary in one-on-one duels. Players who enjoy quick decision-making, acrobatic engagements, and taking risks to reap rewards will find Jett to be an invaluable asset to any team."
    },
    "KAY/O": {
        "playstyle": "aggressive",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["disruption", "flash"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "yes",
        "description": "KAY/O is a disruptive initiator who specializes in neutralizing enemy abilities and opening up opportunities for his team. His abilities revolve around suppression and flash, allowing him to throw a suppression blade that disables enemy abilities in its area of effect and deploy a flash grenade that temporarily blinds opponents. Additionally, his ultimate ability empowers him with an explosive blast that suppresses enemies caught in its range and prevents them from using abilities. KAY/O's playstyle is disruptive, as he excels at neutralizing enemy utility and creating windows of opportunity for his team. His ability to suppress and disable opponents makes him a strong choice for countering agent abilities and denying enemy strategies. Players who enjoy disrupting the enemy team and making impactful plays will find KAY/O to be a valuable addition to their team."
    },
    "Killjoy": {
        "playstyle": "defensive",
        "role": "sentinel",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["area-denial", "recon"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "low",
        "playmaking": "no",
        "description": "Killjoy is a strategic sentinel specializing in area denial and tactical control. Her unique abilities make her a master of restricting enemy movement and dictating engagements. Her kit centers on devices that curtail foes' actions, granting her team a vital edge.Killjoy's arsenal includes Alarmbotsâ€”exploding bots that chase and damage enemies, disrupting their plans. Nanoswarms create no-go zones, dealing ongoing damage to those within. Her turret adds constant pressure on opponents.The game-changing Lockdown ultimate shines. Deployed with a brief wind-up, it detains caught foes, leaving them exposed for elimination. Killjoy's style is meticulous, securing key areas and disrupting enemies. Denying access and gathering data give her team the upper hand. For players valuing strategy, controlled environments, and outsmarting rivals, Killjoy is the ultimate ally."
    },
    "Neon": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["classic", "shorty", "frenzy", "ghost"],
        "ability": ["mobility", "disruption", "smoke"],
        "teamSupport": "no",
        "skillFloor": "high",
        "mobility": "high",
        "playmaking": "yes",
        "description": "test"
    },
    "Omen": {
        "playstyle": "supportive",
        "role": "controller",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["teleport", "flash"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Omen is a controller with the ability to teleport and blind enemies, making him a versatile agent for both attack and defense."
    },
    "Phoenix": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["fire", "flash", "molly", "healing"],
        "teamSupport": "no",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "yes",
        "description": "Phoenix is a duelist who can control the battlefield with his fire-based abilities and sustain himself with self-healing."
    },
    "Raze": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "frenzy", "ghost"],
        "ability": ["explosives", "mobility"],
        "teamSupport": "no",
        "skillFloor": "medium",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Raze is an aggressive duelist who excels at causing chaos and dealing explosive damage on the battlefield. Her abilities revolve around explosives and mobility, allowing her to launch explosive packs, throw cluster grenades, and deploy a powerful rocket launcher (that never makes damage :P). Additionally, she can use her blast pack to propel herself through the air and gain vertical advantage. Raze's playstyle is highly aggressive, as she can create devastating explosions to clear out enemies or force them into unfavorable positions. Her mobility skills also make her a versatile agent for flanking and taking aggressive engagements. Players who enjoy high-octane gameplay and causing chaos among the enemy team will find Raze to be an explosive force to be reckoned with."
    },
    "Reyna": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": "flash",
        "teamSupport": "no",
        "skillFloor": "high",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Reyna is a duelist who thrives on eliminating enemies and empowering herself with their souls. She wields a submachine gun as her primary weapon, making her lethal in close to medium-range encounters. Reyna is also proficient with classics for backup. Her abilities revolve around empowerment, allowing her to become invulnerable, gain increased fire rate and reload speed, and dismiss from dangerous situations. Reyna's playstyle is highly aggressive, as she excels at fragging out and taking fights on her terms. Players who enjoy a high-risk, high-reward playstyle and want to dominate the enemy team will find Reyna to be an unstoppable force."
    },
    "Sage": {
        "playstyle": "defensive",
        "role": "sentinel",
        "primaryWeapon": ["sheriff", "classic", "ghost"],
        "secondaryWeapon": "classic",
        "ability": ["healing", "area-denial"],
        "teamSupport": "yes",
        "skillFloor": "low",
        "mobility": "medium",
        "playmaking": "no",
        "description": "Sage is a sentinel who can provide healing and resurrection to her teammates, making her a crucial support for the team."
    },
    "Skye": {
        "playstyle": "supportive",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["healing", "recon", "flash"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "yes",
        "description": "Skye is a supportive initiator who excels at providing healing and gathering information for her team. Her abilities focus on healing and recon, allowing her to deploy a healing pool to restore health to herself and nearby allies, send out a hawk to scout enemy positions, and unleash a seeker that tracks and reveals enemies. Additionally, her ultimate ability calls upon a pack of wolves that hunt down and immobilize enemies. Skye's playstyle is supportive, as she prioritizes healing and team utility. Her ability to provide healing and gather vital information makes her an excellent asset for coordinated team play. Players who enjoy supporting their teammates and taking a proactive role in initiating fights will find Skye to be a valuable addition to their team."
    },
    "Sova": {
        "playstyle": "tactical",
        "role": "initiator",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "ghost"],
        "ability": ["recon", "disruption"],
        "teamSupport": "yes",
        "skillFloor": "medium",
        "mobility": "medium",
        "playmaking": "no",
        "description": "Sova is a tactical initiator who excels at gathering information and disrupting enemy positions. With a rifle as his primary weapon, he is effective at medium to long-range engagements. Sova is also skilled with classics for close-quarters combat. His abilities revolve around recon and disruption, allowing him to shoot recon bolts to reveal enemies, deploy shock darts to deal damage and reveal targets, and even launch an explosive drone to clear areas or catch enemies off-guard. Sova's playstyle is tactical, as he provides valuable information to his team and can disrupt enemy positions with his abilities. His playmaking potential makes him a strong choice for players who enjoy setting up plays and controlling the flow of the game."
    },
    "Viper": {
        "playstyle": "defensive",
        "role": "controller",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["smoke", "molly"],
        "teamSupport": "no",
        "skillFloor": "medium",
        "mobility": "low",
        "playmaking": "no",
        "description": "Viper is a controller who can control the battlefield with her toxic abilities, denying enemy movement and vision. Armed with a submachine gun as her primary weapon, she excels at close to medium-range engagements. Viper is also skilled with a shorty for her ult. Her abilities revolve around poison, allowing her to create toxic clouds, emit a poison wall, and even deploy a deadly chemical bomb. Viper's playstyle is defensive, as she can hold positions and deny enemy advances with her toxic utility. Players who enjoy creating zones of control and disrupting enemy strategies will find Viper to be a formidable presence on the battlefield."
    },
    "Yoru": {
        "playstyle": "aggressive",
        "role": "duelist",
        "primaryWeapon": "rifle",
        "secondaryWeapon": ["sheriff", "classic", "shorty", "ghost"],
        "ability": ["flash", "mobility"],
        "teamSupport": "no",
        "skillFloor": "high",
        "mobility": "high",
        "playmaking": "yes",
        "description": "Yoru is an aggressive duelist who excels at creating chaos and confusion on the battlefield. With an SMG as his primary weapon, he is deadly in close-quarters engagements. Yoru also wields a knife for swift and silent eliminations. His abilities focus on disruption and mobility, allowing him to deceive opponents and maneuver quickly around the map. He can create fake footsteps, teleport short distances, and even enter a dimension where he is invisible and invulnerable. Yoru's playstyle is aggressive, as he thrives on surprise attacks and outmaneuvering enemies. His limited team support makes him more suitable for solo play or players who prefer a self-reliant and unpredictable playstyle."
    },
};

var weights = {
    "playstyle": 2,
    "role": 2,
    "primaryWeapon": 1,
    "secondaryWeapon": 1,
    "ability": 3,
    "teamSupport": 2,
    "skillFloor": 1,
    "mobility": 1,
    "playmaking": 1,
};

function gotostatus() {
      window.location.href = "valstatus.html";
    }

function recommendAgent() {
    const playstyle = document.getElementById("playstyle").value;
    const role = document.getElementById("role").value;
    const primaryWeapon = document.getElementById("primary-weapon").value;
    const secondaryWeapon = document.getElementById("secondary-weapon").value;
    const teamSupport = document.getElementById("team-support").value;
    const skillFloor = document.getElementById("skill-floor").value;
    const mobility = document.getElementById("mobility").value;
    const playmaking = document.getElementById("playmaking").value;
    const selectedAbilities = Array.from(document.querySelectorAll('input[name="ability"]:checked')).map(input => input.value);

    if (!playstyle || !role || !primaryWeapon || !secondaryWeapon || selectedAbilities.length === 0 || !teamSupport || !skillFloor || !mobility || !playmaking) {
    alert("Please fill out all selection parameters with at least one option selected.");
    return;
    }

    var matchPercentages = {};

    for (var agent in agentData) {
    var agentDetails = agentData[agent];
    var points = 0;
    var totalAbilities = selectedAbilities.length;
    var matchingAbilities = selectedAbilities.filter(ability => agentDetails.ability.includes(ability)).length;

  
    points += matchingAbilities / totalAbilities || 0;
    points += playstyle === agentDetails.playstyle ? 1 : 0;
    points += role === agentDetails.role ? 1 : 0;
    points += primaryWeapon === agentDetails.primaryWeapon ? 1 : 0;
    points += secondaryWeapon === agentDetails.secondaryWeapon ? 1 : 0;
    points += teamSupport === agentDetails.teamSupport ? 1 : 0;
    points += skillFloor === agentDetails.skillFloor ? 1 : 0;
    points += mobility === agentDetails.mobility ? 1 : 0;
    points += playmaking === agentDetails.playmaking ? 1 : 0;

    var matchPercentage = Math.round((points / 9) * 100);
    matchPercentages[agent] = matchPercentage;
    }

    var highestMatchAgent = null;
    var highestMatchPercentage = 0;

    for (var agent in matchPercentages) {
    var matchPercentage = matchPercentages[agent];
    if (matchPercentage > highestMatchPercentage) {
        highestMatchAgent = agent;
        highestMatchPercentage = matchPercentage;
    }
    }

    var resultDiv = document.getElementById("result");
    resultDiv.innerHTML = "";
    var resultHeading = document.createElement("h3");
    resultHeading.classList.add("result-heading");
    resultHeading.textContent = "Agent Recommendation:";
    resultDiv.appendChild(resultHeading);

    if (highestMatchAgent) {
    var resultText = document.createElement("p");
    resultText.classList.add("result-text");
    resultText.textContent = highestMatchAgent + " " + highestMatchPercentage + "%";
    resultDiv.appendChild(resultText);

    var descriptionText = document.createElement("p");
    descriptionText.classList.add("description-text");
    descriptionText.textContent = agentData[highestMatchAgent].description;
    resultDiv.appendChild(descriptionText);


    showMatches(matchPercentages, highestMatchAgent);
    } else {
    var noResultText = document.createElement("p");
    noResultText.classList.add("result-text");
    noResultText.textContent = "No suitable agent found.";
    resultDiv.appendChild(noResultText);
    }
}

function showMatches(matchPercentages, highestMatchAgent) {
    var matchesDiv = document.getElementById("result");

    document.getElementById("settings").style.display = "none";

    matchesDiv.style.display = "flex";

    var matchesHeading = document.createElement("h3");
    matchesHeading.classList.add("result-heading");
    matchesHeading.textContent = "Next Matches:";
    matchesDiv.appendChild(matchesHeading);


    var sortedMatches = Object.entries(matchPercentages).sort((a, b) => b[1] - a[1]);

    var count = 0;

    for (var i = 0; i < sortedMatches.length; i++) {
        var agent = sortedMatches[i][0];
        var matchPercentage = sortedMatches[i][1];

        if (count >= 3) {
        break;
        }

        if (agent !== highestMatchAgent) {
        var matchText = document.createElement("p");
        matchText.classList.add("result-text");
        matchText.textContent = agent + " " + matchPercentage + "%";
        matchesDiv.appendChild(matchText);
        count++;
        }
    }
}
